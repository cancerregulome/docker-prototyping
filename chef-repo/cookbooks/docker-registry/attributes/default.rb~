# Docker registry configuration values and command line parameters

# /etc/sysconfig/docker-registry (environment file)
default['docker_registry']['environment']['config_file'] = "/etc/docker-registry.yml"
default['docker_registry']['environment']['settings_flavor'] = "local"
default['docker_registry']['environment']['registry_address'] = "localhost"
default['docker_registry']['environment']['registry_port'] = "5000"
default['docker_registry']['environment']['gunicorn_workers'] = "4"

# NOTE:  remove the next entry later once an authentication proxy has been set up for the private registry
default['docker_registry']['environment']['insecure_registry'] = "localhost:5000"

# /etc/init.d/docker-registry (service file)
default['docker_registry']['service']['description'] = "Registry server for Docker"
default['docker_registry']['service']['type'] = "simple"
default['docker_registry']['service']['environment_vars'] = "DOCKER_REGISTRY_CONFIG=/etc/docker-registry.yml"
default['docker_registry']['service']['environment_file'] = "/etc/sysconfig/docker-registry"
default['docker_registry']['service']['working_directory'] = "/usr/lib/python2.7/site-packages/docker-registry"
default['docker_registry']['service']['exec_start'] = "/usr/bin/gunicorn --access-logfile - --debug --max-requests 100 --graceful-timeout 3600 -t 3600 -k gevent -b ${REGISTRY_ADDRESS}:${REGISTRY_PORT} -w $GUNICORN_WORKERS docker_registry.wsgi:application"
default['docker_registry']['service']['restart_policy'] = "on-failure"
default['docker_registry']['service']['wanted_by'] = "multi-user.target"

# /etc/docker-registry.yml (config file)
default['docker_registry']['config']['storage_path'] = "/var/docker-registry"
# Add more later when values are known and needed


