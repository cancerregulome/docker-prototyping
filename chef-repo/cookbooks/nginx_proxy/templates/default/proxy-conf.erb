server {
	listen 443;

	ssl on;
	ssl_certificate <%= @certificate %>/<%= @hostname %>.crt;
	ssl_certificate_key <%= @pem_key %>/<%= @hostname %>.key;

	client_max_body_size 0;

	location / {
		proxy_pass http://<%= @proxied_host %>:<%= @proxied_port %>;

		auth_basic "Restricted";
		auth_basic_user_file <%= @htpasswd_file %>;
	}
}
