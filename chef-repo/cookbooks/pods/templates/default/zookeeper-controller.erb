# The zookeeper replication controller -- NOTE:  Need to make 3 copies in order to create a cluster of 3 unique zookeepers
{
  "id": "zookeeper-controller",
  "kind": "ReplicationController",
  "apiVersion": "v1beta1",
  "desiredState": {
    "replicas": <%= @quorum_size %>,
    "replicaSelector": {"name": "<%= @pod_name %>"},
    "podTemplate": {
      "desiredState": {
        "manifest": {
          "version": "v1beta1",
          "id": "zookeeper",
          "containers": [{
            "name": "<%= @pod_name %>",
            "image": "<%= @pod_name %>",
            "cpu": 100,
            "ports": [
			{
              "containerPort": <%= @client_port %>,
			  "name": "client"
            }, 
			{
			  "containerPort": <%= @leader_connect %>,
			  "name: "leader_connect"
			},
			{
			  "containerPort": <%= @leader_elect %>,
			  "name: "leader_elect"
			}
			]
          }]
        }
      },
      "labels": {
        "name": "<%= @pod_name %>",
        "app": "zookeeper"
      }
    }
  },
  "labels": {
    "name": "<%= @pod_name %>" 
  }
}
